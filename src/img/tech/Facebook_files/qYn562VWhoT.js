if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }

__d("CometAnimatedImagePickerSearchResultsRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="3786904921427904"}),null);
__d("CometAnimatedImagePickerSearchResultsRootQuery.graphql",["CometAnimatedImagePickerSearchResultsRootQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"media_height"},c={defaultValue:null,kind:"LocalArgument",name:"media_width"},d={defaultValue:null,kind:"LocalArgument",name:"query_type"},e={defaultValue:null,kind:"LocalArgument",name:"result_types"},f={defaultValue:null,kind:"LocalArgument",name:"scale"},g={defaultValue:null,kind:"LocalArgument",name:"search_interface"},h={defaultValue:null,kind:"LocalArgument",name:"search_query"},i=[{kind:"Literal",name:"count",value:40},{kind:"Variable",name:"media_height",variableName:"media_height"},{kind:"Variable",name:"media_scale",variableName:"scale"},{kind:"Variable",name:"media_width",variableName:"media_width"},{kind:"Variable",name:"query",variableName:"search_query"},{kind:"Variable",name:"query_type",variableName:"query_type"},{kind:"Variable",name:"result_types",variableName:"result_types"},{kind:"Variable",name:"search_interface",variableName:"search_interface"}],j={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{fragment:{argumentDefinitions:[a,c,d,e,f,g,h],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:i,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometAnimatedImagePickerSearchResults_results"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,e,h,c,a,f,g],kind:"Operation",name:"CometAnimatedImagePickerSearchResultsRootQuery",selections:[{alias:null,args:i,concreteType:"MessengerPlatformResponse",kind:"LinkedField",name:"comet_external_media",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},j,k,l,m,n,{alias:null,args:null,kind:"ScalarField",name:"tags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gif_source",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[j,k,l,m,n,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],storageKey:null}]},params:{id:b("CometAnimatedImagePickerSearchResultsRootQuery_facebookRelayOperation"),metadata:{},name:"CometAnimatedImagePickerSearchResultsRootQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometAnimatedImagePickerSearchResults_results.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"size_bytes",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"duration_ms",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometAnimatedImagePickerSearchResults_results",selections:[{alias:null,args:null,concreteType:"MessengerPlatformResultGroup",kind:"LinkedField",name:"result_group",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformResult",kind:"LinkedField",name:"results",plural:!0,selections:[{alias:null,args:null,concreteType:"MessengerPlatformSourceMedia",kind:"LinkedField",name:"source",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mime_type",storageKey:null},a,b,c,d,e,{alias:null,args:null,kind:"ScalarField",name:"tags",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gif_source",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MessengerPlatformMedia",kind:"LinkedField",name:"media",plural:!0,selections:[a,b,c,d,e,{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"app_fbid",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"result_next_cursor",storageKey:null}],type:"MessengerPlatformResponse",abstractKey:null}}();e.exports=a}),null);
__d("CometPickerScrollableArea.react",["CometScrollableArea.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useEffect,j=b.useRef,k={wrapper:{textAlign:"oqcyycmt",width:"k4urcfbm"}};function a(a){var b=a.children,d=a.scrollKey,e=a.xstyle;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","scrollKey","xstyle"]);var f=j(null),g=j(null);i(function(){var a=g.current;g.current=d;if(d==null||d===a)return;if(f.current!=null){a=f.current.getDOMNode();a!=null&&a.scrollTo(0,0)}},[d]);return h.jsx(c("CometScrollableArea.react"),babelHelpers["extends"]({},a,{ref:f,xstyle:[k.wrapper,e],children:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPickerSearchBox.react",["fbt","ix","CometComponentWithKeyCommands.react","CometKeys","CometRoundedTextInput.react","TetraCircleButton.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n={searchWrapper:{paddingTop:"cxgpxx05",paddingEnd:"hv4rvrfc",paddingBottom:"sj5x9vvc",paddingStart:"dati1w0a"}};function a(a){var b=a.searchQuery,e=a.setSearchQuery,f=m(null);l(function(){var a=f.current;if(a==null)return;a.focus()},[]);a=[{command:{key:c("CometKeys").ENTER},description:h._(/*FBT_CALL*/"GIF search"/*FBT_CALL*/),handler:function(){},triggerFromInputs:!0}];return j.jsx(c("CometComponentWithKeyCommands.react"),{commandConfigs:a,xstyle:n.searchWrapper,children:j.jsx(c("CometRoundedTextInput.react"),{addOnEnd:b.length!==0?j.jsx(c("TetraCircleButton.react"),{color:"tertiary",icon:d("fbicon")._(i("478232"),16),label:h._(/*FBT_CALL*/"Clear Search Button"/*FBT_CALL*/),onPress:function(){return e("")},size:24}):void 0,"aria-expanded":!1,"aria-label":h._(/*FBT_CALL*/"GIF search"/*FBT_CALL*/),autoComplete:"off",icon:j.jsx(c("TetraIcon.react"),{color:"tertiary",icon:d("fbicon")._(i("491282"),16),size:16}),label:String(h._(/*FBT_CALL*/"GIF search"/*FBT_CALL*/)),onChange:k(function(a){a.target.value!==void 0&&e(a.target.value)},[e]),placeholder:h._(/*FBT_CALL*/"Search"/*FBT_CALL*/),ref:f,role:"combobox",spellCheck:!1,type:"text",value:(a=b)!=null?a:""})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometAnimatedImagePickerSearchResult.react",["fbt","CometImage.react","CometPressable.react","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useCallback,k=c("gkx")("1924962");function a(a){var b=a.desiredWidth,d=a.image,e=a.onSelect;a=j(function(a){a.preventDefault(),e(d)},[d,e]);var f=d.source.width,g=d.source.height;f=b/f;var l=k&&d.media.preview.label!=null?d.media.preview.label:h._(/*FBT_CALL*/"GIF"/*FBT_CALL*/);return i.jsx(c("CometPressable.react"),{onPress:a,overlayDisabled:!0,children:i.jsx(c("CometImage.react"),{alt:l,height:g*f,src:d.source.url,width:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometAnimatedImagePickerSearchResults.react",["fbt","CometAnimatedImagePickerSearchResult.react","CometAnimatedImagePickerSearchResults_results.graphql","CometPickerNullState.react","CometPickerScrollableArea.react","CometRelay","NullStateMedia","getJSEnumSafe","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState,m=5;function a(a){var e,f,g=d("CometRelay").useFragment(i!==void 0?i:i=b("CometAnimatedImagePickerSearchResults_results.graphql"),a.results),n=(e=g==null?void 0:(e=g.result_group)==null?void 0:(e=e[0])==null?void 0:e.results.length)!=null?e:0;e=l(m);var o=e[0],p=e[1];e=k(function(){return p(function(a){return Math.min(a+m,n)})},[n]);f=g==null?void 0:(f=g.result_group[0])==null?void 0:(f=f.results[0])==null?void 0:f.result_id;var q=l(null),r=q[0];q=q[1];r!==f&&(q(f),p(m));var s={ANIMATION:1,PHOTO:0,STICKER:3,VIDEO:2};if(!g||!g.result_group||g.result_group.length===0||!g.result_group[0])return j.jsx(c("CometPickerNullState.react"),{body:h._(/*FBT_CALL*/"No GIFs to show"/*FBT_CALL*/),icon:c("NullStateMedia")});r=g.result_group[0].results;var t=g.result_next_cursor;q=r.map(function(b,d){var e,f=b.media[0],g=b.source;if(f==null||g==null)return;if(d>o)return null;f={preview:{durationMs:(d=f.duration_ms)!=null?d:0,height:(d=f.height)!=null?d:0,label:(d=f.label)!=null?d:null,sizeBytes:(d=f.size_bytes)!=null?d:0,url:(d=g.url)!=null?d:"",width:(d=f.width)!=null?d:0}};g={durationMs:(d=g.duration_ms)!=null?d:0,gifSource:(d=g.gif_source)!=null?d:null,height:(d=g.height)!=null?d:0,mimeType:(d=g.mime_type)!=null?d:"",sizeBytes:(d=g.size_bytes)!=null?d:0,tags:(d=g.tags)!=null?d:null,title:(d=g.title)!=null?d:"",url:(d=g.url)!=null?d:"",width:(d=g.width)!=null?d:0};d=(d=b.result_type)!=null?d:"ANIMATION";return j.jsx(c("CometAnimatedImagePickerSearchResult.react"),{desiredWidth:a.desiredWidth,image:{cursor:(e=t)!=null?e:"",media:f,platformFBID:(e=b.app_fbid)!=null?e:"",resultID:(f=b.result_id)!=null?f:"",source:g,type:(e=c("getJSEnumSafe")(s,d))!=null?e:1},onSelect:a.onSelect},(f=b.result_id)!=null?f:void 0)});return j.jsx(c("CometPickerScrollableArea.react"),{horizontal:!1,onScrollBottom:e,scrollKey:a.scrollKey,xstyle:a.xstyle,children:q})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometAnimatedImagePickerSearchResultsRoot.react",["CometAnimatedImagePickerSearchResults.react","CometAnimatedImagePickerSearchResultsRootQuery.graphql","CometErrorBoundary.react","CometRelay","WebPixelRatio","react","useInvalidNumberThrowsViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react"),j=d("react").useMemo;function k(a){var e=a.mediaHeight,f=a.mediaWidth,g=a.onSelect,k=a.searchInterface,l=k===void 0?"FB_INTERFACE":k,m=a.searchQuery;k=a.xstyle;c("useInvalidNumberThrowsViolation")(f);a=j(function(){return{media_height:e,media_width:f,query_type:m===""?"TRENDING":"SEARCH",result_types:["ANIMATION"],scale:d("WebPixelRatio").get(),search_interface:l,search_query:m}},[e,f,l,m]);var n=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("CometAnimatedImagePickerSearchResultsRootQuery.graphql"),a);return n.comet_external_media==null?null:i.jsx(c("CometAnimatedImagePickerSearchResults.react"),{desiredWidth:a.media_width,onSelect:g,results:n.comet_external_media,scrollKey:m,xstyle:k})}k.displayName=k.name+" [from "+f.id+"]";function a(a){return i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(k,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometAnimatedImagePickerCard.react",["CometAnimatedImagePickerSearchResultsRoot.react","react","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.mediaHeight,d=a.mediaWidth,e=a.onSelect,f=a.searchQuery;a=a.xstyle;return h.jsx(c("CometAnimatedImagePickerSearchResultsRoot.react"),{mediaHeight:b,mediaWidth:d,onSelect:e,searchQuery:c("useDebouncedValue")(f,200),xstyle:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometPickerBasicStackingLayout.react",["CometColumn.react","CometColumnItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.children,d=b.content,e=b.footer;b=b.header;var f=a.expanding,g=a.testid;g=a.xstyle;return h.jsxs(c("CometColumn.react"),{expanding:f,testid:void 0,xstyle:g,children:[h.jsx(c("CometColumnItem.react"),{children:b}),h.jsx(c("CometColumnItem.react"),{expanding:!0,children:d}),h.jsx(c("CometColumnItem.react"),{children:e})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatAnimatedImageFlyout.react",["CometAnimatedImagePickerCard.react","CometColumn.react","CometColumnItem.react","CometErrorBoundary.react","CometPickerBasicStackingLayout.react","CometPickerSearchBox.react","CometPlaceholder.react","CometPopover.react","CometProgressRingIndeterminate.react","cr:1365","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");e=d("react");var i=e.useCallback,j=e.useState,k=c("gkx")("1299319"),l=274,m={container:{height:"j707pzvn",width:"hdkcmrsv"},scrollableAreaForIE11:{maxHeight:"nu4hu5il"}};function a(a){var d=a.isSecureThread;d=d===void 0?!1:d;var e=a.onClose,f=a.onSelect,g=a.testid;g=a.withArrow;a=g===void 0?!0:g;g=i(function(a){e(),f(a)},[e,f]);var n=j(""),o=n[0];n=n[1];return h.jsx(c("CometErrorBoundary.react"),{children:h.jsx(c("CometPopover.react"),{testid:void 0,withArrow:a,children:h.jsx(c("CometPickerBasicStackingLayout.react"),{xstyle:m.container,children:{content:h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(c("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:h.jsx(c("CometColumnItem.react"),{children:h.jsx(c("CometProgressRingIndeterminate.react"),{color:"disabled",size:24})})}),children:d?b("cr:1365")&&h.jsx(b("cr:1365"),{mediaHeight:l,mediaWidth:l,onSelect:g,searchQuery:o,xstyle:k&&m.scrollableAreaForIE11}):h.jsx(c("CometAnimatedImagePickerCard.react"),{mediaHeight:l,mediaWidth:l,onSelect:g,searchQuery:o,xstyle:k&&m.scrollableAreaForIE11})},1),header:h.jsx(c("CometPickerSearchBox.react"),{searchQuery:o,setSearchQuery:n},0)}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFIAnimatedImagePickerCard.react",["CometAnimatedImagePickerCard.react","CometColumn.react","CometColumnItem.react","CometPickerBasicStackingLayout.react","CometPickerSearchBox.react","CometPlaceholder.react","CometProgressIndicator.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useState,k=c("gkx")("1299319"),l=274,m={popover:{height:"j707pzvn",width:"hdkcmrsv"},scrollableAreaForIE11:{height:"sgwjjusx"}};function a(a){var b=a.onClose,d=a.onSelect;a=i(function(a){b(),d(a)},[b,d]);var e=j(""),f=e[0];e=e[1];return h.jsx(c("CometPickerBasicStackingLayout.react"),{xstyle:m.popover,children:{content:h.jsx(c("CometPlaceholder.react"),{fallback:h.jsx(c("CometColumn.react"),{align:"center",expanding:!0,verticalAlign:"center",children:h.jsx(c("CometColumnItem.react"),{children:h.jsx(c("CometProgressIndicator.react"),{})})}),children:h.jsx(c("CometAnimatedImagePickerCard.react"),{mediaWidth:l,onSelect:a,searchQuery:f,xstyle:k&&m.scrollableAreaForIE11})}),header:h.jsx(c("CometPickerSearchBox.react"),{searchQuery:f,setSearchQuery:e},0)}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("XUFICommentGIFPreprocessController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/ufi/comment/gif_preprocess/",{})}),null);
__d("CometUFIGIFPickerPopoverForLexical.react",["CometPopover.react","CometUFIAnimatedImagePickerCard.react","XUFICommentGIFPreprocessController","cometAsyncFetch","promiseDone","react","useCometUFILexicalEmptyListeners"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useCallback;function a(a){var b=a.onClose;a=a.pluginProps;var e=a.setComposerState,f=a.commentAction,g=a.onCommit,j=d("useCometUFILexicalEmptyListeners").useCometUFILexicalIsEmpty(a.addEmptyListener),k=a.editor;a=i(function(a){c("promiseDone")(c("cometAsyncFetch")(c("XUFICommentGIFPreprocessController").getURIBuilder().getURI().toString(),{data:{gif_url:a.source.url},method:"POST"}));var d=function(b){return babelHelpers["extends"]({},b,{attachment:{__type:"GIF",data:a}})};j&&f==="ADD"?g(d):(e(d),k.focus());b()},[f,k,j,b,g,e]);return h.jsx(c("CometPopover.react"),{withArrow:!0,children:h.jsx(c("CometUFIAnimatedImagePickerCard.react"),{onClose:b,onSelect:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);